generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Artist {
  Id        Int      @id @default(autoincrement())
  name      String
  genre     String
  bio       String
  imageUrl  String
  createdAt DateTime @default(now())
  Album     Album[]
  Lyrics    Lyrics[]
}

model LyricsContents {
  Id     Int      @id @default(autoincrement())
  title  String
  chorus String
  verse1 String
  verse2 String
  verse3 String
  verse4 String
  verse5 String
  verse6 String
  Lyrics Lyrics[]

  @@map("LyricsContents")
}

model Lyrics {
  Id             Int            @id @default(autoincrement())
  contentId      Int
  albumId        Int
  artistId       Int
  audioFileUrl   String
  language       LANGUAGES      @default(ENGLISH)
  createdAt      DateTime       @default(now())
  Album          Album          @relation(fields: [albumId], references: [Id])
  Artist         Artist         @relation(fields: [artistId], references: [Id])
  Category       CATEGORIES     @default(THANKSGIVING)
  LyricsContents LyricsContents @relation(fields: [contentId], references: [Id])
  Favorites      Favorites[]
}

model Album {
  Id            Int      @id @default(autoincrement())
  title         String
  artistId      Int
  releaseDate   DateTime
  coverImageUrl String
  createdAt     DateTime @default(now())
  Artist        Artist   @relation(fields: [artistId], references: [Id])
  Lyrics        Lyrics[]
}

model User {
  Id        Int      @id @default(autoincrement())
  firstName String
  LastName  String
  userName  String //firstName + LastName
  email     String   @unique
  password  String
  role      ROLES    @default(ADMIN)
  phone     String
  createdAt DateTime @default(now())

  Favorites Favorites[]
}

model Favorites {
  Id        Int      @id @default(autoincrement())
  userId    Int
  lyricsId  Int
  createdAt DateTime @default(now())
  User      User     @relation(fields: [userId], references: [Id])
  Lyrics    Lyrics   @relation(fields: [lyricsId], references: [Id])
}

enum LANGUAGES {
  ENGLISH
  SIDAMA
  AFAAN_OROMO
  AMHARIC
  GURAGIGNA
  KEMBATISSA
  WOLAITA
  TIGRIGNA
  HADYIGNA
  NUER
}

enum CATEGORIES {
  THANKSGIVING
  CONFESS
  PRAISE
  PRAYER
  CHRISTIAN_LIVING
  DEVOTIONAL
  WORSHIP
  TESTIMONY
  MISCELLANEOUS
}

enum ROLES {
  ADMIN
  SUPER_ADMIN
  GUEST
}
